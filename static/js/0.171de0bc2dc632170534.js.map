{"version":3,"sources":["webpack:///./src/Mixin/urlFilter.js","webpack:///./src/Mixin/checkUrlParam.js","webpack:///./src/static/news.json"],"names":["__webpack_require__","d","__webpack_exports__","urlFilter","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__store_index__","beforeRouteEnter","to","from","next","fromQuery","query","fromParam","toParam","myWeb3","Vue","prototype","$myWeb3","utils","isAddress","store","state","metamask","urlStatus","commit","path","checkUrlParam","methods","urlParams","window","location","search","referralAddress","substr","module","exports","index","title"],"mappings":"oDAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,QAAAK,EAAAL,EAAA,QAGMG,GAEJG,iBAFgB,SAEEC,EAAIC,EAAMC,GAC1B,IAAMC,EAAYF,EAAKG,MACjBC,EAAYF,EAAUH,GACtBM,EAAUN,EAAGI,MAAMJ,GACnBO,EAASC,UAAIC,UAAUC,QAEzBH,EACED,GAAWC,EAAOI,MAAMC,UAAUN,IACG,IAAnCO,IAAMC,MAAMC,SAASC,WACvBH,IAAMI,OAAO,wBAAyB,GAExCf,KACSG,GAAaE,EAAOI,MAAMC,UAAUP,GAC7CH,GACEgB,KAAMlB,EAAGkB,KACTd,MAAOD,KAI8B,IAAnCU,IAAMC,MAAMC,SAASC,WACvBH,IAAMI,OAAO,wBAAyB,GAExCf,GACEgB,KAAM,eAKRhB,EADEI,GAEAY,KAAM,YACNd,MAAOD,IAIPe,KAAM,mDCvChBzB,EAAAC,EAAAC,EAAA,sBAAAwB,IAAA,IAAAtB,EAAAJ,EAAA,QACM0B,GACJC,SACED,cADO,WAEL,IAAMZ,EAASC,UAAIC,UAAUC,QAEzBW,EAAYC,OAAOC,SAASC,OAC5BC,EAAkB,KACtB,SAAIJ,GAAwC,SAA3BA,EAAUK,OAAO,EAAG,KACnCD,EAAkBJ,EAAUK,OAAO,KACZnB,GAAUA,EAAOI,MAAMC,UAAUa,KAC/CA,yBCXjBE,EAAAC,UAAmBC,MAAA,EAAAC,MAAA,YAA8BD,MAAA,EAAAC,MAAA,YAA8BD,MAAA,EAAAC,MAAA,YAA8BD,MAAA,EAAAC,MAAA,YAA8BD,MAAA,EAAAC,MAAA","file":"static/js/0.171de0bc2dc632170534.js","sourcesContent":["// 进入['Tasks', 'Withdraw', 'Statistics', 'MasterNode']页面时，过滤直推地址的合法性\r\nimport Vue from 'vue'\r\nimport store from '../store/index'\r\nconst urlFilter = {\r\n  // 全局导航守卫不可能过来 fromParam为真toParam为假的数据\r\n  beforeRouteEnter (to, from, next) {\r\n    const fromQuery = from.query\r\n    const fromParam = fromQuery.to\r\n    const toParam = to.query.to\r\n    const myWeb3 = Vue.prototype.$myWeb3 // 以metamask的提供器，获取web3对象\r\n\r\n    if (myWeb3) {\r\n      if (toParam && myWeb3.utils.isAddress(toParam)) {\r\n        if (store.state.metamask.urlStatus !== 1) { // urlStatus !== 1 时，提交改变状态\r\n          store.commit('metamask/setUrlStatus', 1)\r\n        }\r\n        next()\r\n      } else if (fromParam && myWeb3.utils.isAddress(fromParam)) {\r\n        next({\r\n          path: to.path,\r\n          query: fromQuery\r\n        })\r\n      } else {\r\n        // todo 提交一个状态，以便提示用户的直推地址不合法\r\n        if (store.state.metamask.urlStatus !== 0) { // urlStatus === 1 时，提交改变状态\r\n          store.commit('metamask/setUrlStatus', 0)\r\n        }\r\n        next({\r\n          path: '/purchase'\r\n        })\r\n      }\r\n    } else {\r\n      if (toParam) {\r\n        next({\r\n          path: '/purchase',\r\n          query: fromQuery\r\n        })\r\n      } else {\r\n        next({\r\n          path: '/purchase'\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport {urlFilter}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Mixin/urlFilter.js","import Vue from 'vue'\r\nconst checkUrlParam = {\r\n  methods: {\r\n    checkUrlParam () {\r\n      const myWeb3 = Vue.prototype.$myWeb3 // 以metamask的提供器，获取web3对象\r\n      // 浏览器会忽略#标志后面的数据，所以vue如果使用hash路由模式，则location.search获取不到值,需要启用history模式\r\n      let urlParams = window.location.search // 获取url参数，审核是否具有邀请链接; todo 注意，在masternode中的 refer link不是 ?to=作为前缀s\r\n      let referralAddress = null // 交易数据\r\n      if (urlParams && urlParams.substr(0, 4) === '?to=') {\r\n        referralAddress = urlParams.substr(4) // buy接口的referralAddress\r\n        if (referralAddress && myWeb3 && myWeb3.utils.isAddress(referralAddress)) {\r\n          return referralAddress\r\n        }\r\n      }\r\n      return false\r\n    }\r\n  }\r\n}\r\n\r\nexport {checkUrlParam}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Mixin/checkUrlParam.js","module.exports = [{\"index\":0,\"title\":\"今天你要嫁给我\"},{\"index\":1,\"title\":\"今天你要嫁给我\"},{\"index\":2,\"title\":\"今天你要嫁给我\"},{\"index\":3,\"title\":\"今天你要嫁给我\"},{\"index\":4,\"title\":\"今天你要嫁给我\"}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/static/news.json\n// module id = xmIM\n// module chunks = 0"],"sourceRoot":""}