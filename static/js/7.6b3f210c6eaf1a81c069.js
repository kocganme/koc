webpackJsonp([7],{"9aoM":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),i=s.n(a),r=s("exGp"),n=s.n(r),o=s("hUNI"),c=s("IcnI"),l=s("xmIM"),d=s.n(l),h={name:"WhiteList",mixins:[o.a],data:function(){return{lastestNews:d.a[0],whitePage:{pageSize:10,currentPage:1},img:[{id:0,imgurl:s("WZxh")}],isListen:!1}},computed:{countDown:function(){return{d:this.$store.state.countDown.days,h:this.$store.state.countDown.hours,m:this.$store.state.countDown.minutes,s:this.$store.state.countDown.seconds}},whiteStatus:function(){var t=this.$store.state.metamask.whiteStatus;return null!==t&&t},whiteList:function(){var t=this.$store.state.contract.allWhiteList;return null===t&&(t=[]),t}},watch:{whiteList:function(t){if(null!==t&&!this.$ethConf.subscribeMark.TobeWhitelistAddress){var e=this.$myContracts&&this.$myContracts.contractTeam;e&&this.$store.dispatch("contract/startListenEvent",{contract:e,eventName:"TobeWhitelistAddress"})}}},methods:{whitePageCurrentChange:function(t){this.whitePage.currentPage=t},toBeWhitelistAddress:function(){var t=this;return n()(i.a.mark(function e(){var s,a,r,n,o,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.whiteStatus){e.next=3;break}return e.abrupt("return");case 3:if((s={}).referralAddress=t.checkUrlParam(),a=t.$ethConf.adminAddress,console.log("获取的url=======",s.referralAddress),s.referralAddress&&a.includes(s.referralAddress)){e.next=10;break}return t.$notify({title:t.$t("commom.warning"),message:"通过正确的邀请链接的才具有参与资格",position:"top-left",type:"warning"}),e.abrupt("return");case 10:if(r=t.$store.state.metamask.status,console.log("获取的status的值",r),1===r){e.next=16;break}t.$notify({title:t.$t("commom.warning"),message:"请登陆钱包",type:"warning"}),e.next=29;break;case 16:if(n=t.$myProvider,n.networkVersion===t.$ethConf.networkVersion){e.next=22;break}t.$notify({title:t.$t("commom.warning"),message:"请将metamask网络切换至主网络",type:"warning"}),e.next=29;break;case 22:return o=t.$myContracts&&t.$myContracts.contractTeam,l=t.$myWeb3,e.next=26,l.eth.getGasPrice();case 26:s.gasPrice=e.sent,s.gasLimit=t.$ethConf.gasLimit,o&&(s.from=n.selectedAddress,console.warn("whiteList页面合约调用的参数=============",s),o.methods.toBeWhitelistAddress(s.referralAddress).send({from:s.from,gasPrice:s.gasPrice,gas:s.gasLimit},function(t,e){t?console.error("toBeWhiteListAddress交易发生错误======",t):(console.warn("toBewhitelistAddress交易返回值",e),c.a.commit("metamask/setWhiteStatus",!0))}));case 29:case"end":return e.stop()}},e,t)}))()}},created:function(){(console.log("kaishi--------------------"),this.$myProvider)&&(null===this.$store.state.contract.allWhiteList&&this.$store.dispatch("contract/getAdminWhitelistAddress"))}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"whitelist"},[s("div",{staticClass:"block hidden-md-and-down"},[s("el-carousel",{attrs:{height:"30rem"}},t._l(t.img,function(t){return s("el-carousel-item",{key:t.id},[s("el-image",{staticClass:"image",attrs:{src:t.imgurl,fit:"cover"}})],1)}),1),t._v(" "),s("el-alert",{attrs:{type:"info","show-icon":"",closable:!1}},[s("router-link",{attrs:{to:"/news/newsDetail"}},[t._v(t._s(t.lastestNews.title))])],1)],1),t._v(" "),s("el-card",{staticClass:"whitelist-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"card-title"},[t._v(t._s(t.$t("whitelist.cardTilte")))])]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("div",{staticClass:"body-title"},[s("p",{staticClass:"title-countdown"},[t._v(t._s(t.$t("whitelist.countdown")))]),t._v(" "),s("p",{staticClass:"countdown-time"},[t._v(t._s(t.countDown.d)+" Days "+t._s(t.countDown.h)+" : "+t._s(t.countDown.m)+" : "+t._s(t.countDown.s))]),t._v(" "),s("p",{staticClass:"whitelist-rules"},[t._v(t._s(t.$t("whitelist.rules")))])]),t._v(" "),s("div",{staticClass:"card-middle"},[s("el-button",{attrs:{round:"",disabled:t.whiteStatus},on:{click:t.toBeWhitelistAddress}},[t._v(t._s(t.whiteStatus?t.$t("whitelist.disableBtn"):t.$t("whitelist.btnSilver")))])],1)])]),t._v(" "),s("el-card",{staticClass:"box-card bottom-card",attrs:{"body-style":{padding:"0px",height:"305px"}}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"card-title"},[t._v(t._s(t.$t("commom.address")))])]),t._v(" "),s("div",{staticStyle:{height:"250px"}},t._l(t.whiteList.slice((t.whitePage.currentPage-1)*t.whitePage.pageSize,t.whitePage.currentPage*t.whitePage.pageSize),function(e){return s("div",{key:e.index,staticClass:"address"},[t._v(t._s(e))])}),0),t._v(" "),s("div",{staticStyle:{"text-align":"center",padding:"10px 0","border-top":"1px solid gray"}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.whiteList.length,"page-size":t.whitePage.pageSize,"pager-count":5},on:{"current-change":t.whitePageCurrentChange}})],1)])],1)},staticRenderFns:[]};var m=s("VU/8")(h,u,!1,function(t){s("S5EC")},"data-v-4d29257a",null);e.default=m.exports},S5EC:function(t,e){},WZxh:function(t,e,s){t.exports=s.p+"static/img/purchase1.b2e274a.jpg"}});
//# sourceMappingURL=7.6b3f210c6eaf1a81c069.js.map